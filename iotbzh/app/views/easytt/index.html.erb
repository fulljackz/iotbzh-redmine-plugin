<h2>Easy Time Tracking</h2>

<h3>Views</h3>

<ul>
    <li><%= link_to "Day", controller: "easytt", action: "index", :viewtype => "day", :refdate => @view.refdate %></li>
    <li><%= link_to "Week", controller: "easytt", action: "index", :viewtype => "week", :refdate => @view.refdate %></li>
    <li><%= link_to "Month", controller: "easytt", action: "index", :viewtype => "month", :refdate => @view.refdate %></li>
    <li><%= link_to "Working week", controller: "easytt", action: "index", :viewtype => "workweek", :refdate => @view.refdate %></li>
    <li><%= link_to "Working month", controller: "easytt", action: "index", :viewtype => "workmonth", :refdate => @view.refdate %></li>
</ul>

<div id = "formulaire" >
    <h3 class = 'typeForm'>Creation form</h3>
    <%= form_for @time_entry, url: {action: "create"}, html: {class: "formulaire"} do |f| %>
        <p><label>Project</label>  <span class="required"> *</span><%= f.select :project_id, project_tree_options_for_select(Project.allowed_to(:log_time).to_a, :selected => @time_entry.project, :include_blank => true), :required => true %></p>
        <p><label>Issue</label>    <%= f.text_field :issue_id, :size => 6, :required => Setting.timelog_required_fields.include?('issue_id') %>
            <span id="time_entry_issue">
      <%=  link_to_issue(@time_entry.issue) if @time_entry.issue.try(:visible?) %>
    </span>
        </p>
        <p><label>Date</label>     <span class="required">*</span><%= f.date_field :spent_on, :size => 10, :required => true %><%= calendar_for('time_entry_spent_on') %></p>
        <p><label>Hours</label>    <span class="required">*</span><%= f.text_field :hours %></p>
        <p><label>Comment</label>  <%= f.text_field :comments %></p>
        <p><label>Activity</label> <span class="required">*</span> <%= f.select :activity_id, activity_collection_for_select_options(@time_entry), :required => true %></p>
        <p> <%= hidden_field_tag 'id', params[:id] %> </p>
        <p>  <%= f.submit "Ok" %> </p>
    <% end %>
    <%= button_tag "Cancel", onclick: "hidde();"%> 
</div>
<div >
    <button id = "button_users" onclick = "showUserList()"> User times entry </button>
    <%= form_for @time_entry, url: {action: "other_user"}, html: {class: "formulaire"} do |f| %>
        <div id = "form_user">
        <p><label>User</label>
        <%= f.collection_select(:user_id, User.all, :id, :name) %></p>
        <%= f.submit "Ok" %>
        <% end %>
        </div>
</div>


<div class="easytt_view_title_row">
    <%= link_to "<<", controller: "easytt", action: "index", :viewtype => @view.type, :refdate => @view.previous_date %>
    <span class="easytt_view_title"><%= @view.view_title %></span>
    <%= link_to ">>", controller: "easytt", action: "index", :viewtype => @view.type, :refdate => @view.next_date %>
</div>


<%= @view.calendar %>

<% content_for :header_tags do %>
    <%= stylesheet_link_tag 'easytt', :plugin => 'iotbzh' %>
    <%= javascript_include_tag 'easytt',:plugin => 'iotbzh' %>
<% end %>
